=  Triggers 

Now let's see how to create a trigger. 

We can define a trigger as an object representing an event source that triggers the execution of actions. When activated by an event, associated actions are executed

[id=triggers]
.Triggers and rules
image::dot/triggers-rules.dot.png[]

Let's build now an example to see what triggers do. We use a simple action that does nothing except logging its activation. We use it to trace what is happening when you activate triggers. Note we start to construct the example now, but we complete it after we introduced rules, in the next paragraph.

So, let's prepare our example, deploying first a simple `log.js` actions, that just logs its name:

----
function main(args) {
  console.log(args.name)
  return {}
}
----

Then, we  deploy it twice, with two different names:

----
$ nuv action update basics/log-alpha -p name alpha basics/log.js
ok: updated action basics/log-alpha
$ nuv action update basics/log-beta -p name beta basics/log.js
ok: updated action basics/log-alpha
----

By themselves, those actions do nothing except leaving a trace of their activation in the logs:

----
$ nuv action invoke basics/log-alpha                 <1>
ok: invoked /_/basics/log-alpha with id 320b50d841064d0b8b50d841060d0bff
$ nuv action invoke basics/log-beta                  <2>
ok: invoked /_/basics/log-beta with id 990d284f090c45328d284f090c45320d
$ nuv activation list --limit 2                      <3>
activations 
990d284f090c45328d284f090c45320d log-beta
320b50d841064d0b8b50d841060d0bff log-alpha
$ nuv activation poll --since-seconds 60 --exit 20   <4>
Enter Ctrl-c to exit.
Polling for activation logs
Activation: 'log-beta' (e6b76a85c5584579b76a85c558957957)
[
    "2018-03-17T17:32:06.364836123Z stdout: beta"
]
Activation: 'log-alpha' (e92e4466ee8f4684ae4466ee8f6684da)
[
    "2018-03-17T17:32:00.842842699Z stdout: alpha"
]
----
<1> invoking the action `log-alpha`
<2> invoking the action `log-beta`
<3> showing a list of activations
<4> poll the activations (since 60 seconds, for 20 seconds) to see which activations happened and what they logged

Now we are ready to create a trigger, using the command `nuv trigger create` as in <<creating-trigger>>.

[NOTE]
Of course, there is not only `create` but also `update` and  `delete`, and they work as expected, updating and deleting triggers. In the next paragraph, we see also the `fire` command, that needs you first create rules to do something useful.

[id=creating-trigger]
.Creating a trigger and inspecting it
----
$ nuv trigger create basics-alert
ok: created trigger alert
$ nuv trigger list
triggers
/openwhisk@example.com_dev/basics-alert                                     private
$ nuv trigger get basics-alert
ok: got trigger alert
{
    "namespace": "openwhisk@example.com_dev",
    "name": "basics-alert",
    "version": "0.0.1",
    "limits": {},
    "publish": false
}
----

[WARNING]
Triggers are a "namespace level" entity, and you cannot put them in a package.

